# DMPool æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å®¡è®¡æŠ¥å‘Š

**å®¡è®¡æ—¥æœŸ**: 2026-02-03
**å®¡è®¡èŒƒå›´**: PPLNS ç®—æ³•ã€æ”¶ç›Šåˆ†é…ã€ä»½é¢éªŒè¯ã€é…ç½®å‚æ•°

---

## ğŸš¨ ä¸¥é‡é—®é¢˜ (P0 - é˜»å¡ç”Ÿäº§)

### 1. âŒ donation = 10000 å¯¼è‡´çŸ¿å·¥æ”¶ç›Šä¸ºé›¶

**å½“å‰é…ç½®**:
```toml
donation_address = "bc1qce93hy5rhg02s6aeu7mfdvxg76x66pqqtrvzs3"
donation = 10000  # âš ï¸ 10000 basis points = 100%
```

**é—®é¢˜è¯´æ˜**:
- Basis points: 100 = 1%, 10000 = 100%
- `donation = 10000` æ„å‘³ç€ **æ‰€æœ‰åŒºå—å¥–åŠ±éƒ½ç»™æèµ åœ°å€**
- **çŸ¿å·¥æ”¶ç›Š = 0**ï¼Œå®Œå…¨å¤±å»æŒ–çŸ¿æ„ä¹‰

**æ­£ç¡®é…ç½®**:
```toml
# æ— æèµ æ¨¡å¼ (æ¨è)
# donation_address = "..."
# donation = 0

# æˆ–å°‘é‡æèµ ç»™å¼€å‘è€… (å¯é€‰)
donation_address = "dev_address"
donation = 50  # 0.5% æèµ 
```

**å½±å“**: å¦‚æœéƒ¨ç½²ä¸Šçº¿ï¼ŒçŸ¿å·¥å°†æ— æ³•è·å¾—ä»»ä½•æ”¶ç›Šï¼Œä¼šç«‹å³ç¦»å¼€çŸ¿æ± 

---

### 2. âŒ pplns_ttl_days = 1 å¯¼è‡´çŸ¿å·¥æ”¶ç›Šä¸¢å¤±

**å½“å‰é…ç½®**:
```toml
pplns_ttl_days = 1  # âš ï¸ 1å¤©è¿‡æœŸ
```

**é—®é¢˜è¯´æ˜**:
- PPLNS (Pay Per Last N Shares) æ ¹æ®æœ€è¿‘ N å¤©çš„ä»½é¢åˆ†é…æ”¶ç›Š
- TTL=1 æ„å‘³ç€è¶…è¿‡1å¤©çš„ä»½é¢å…¨éƒ¨å¤±æ•ˆ
- æ ‡å‡† PPLNS çŸ¿æ± ä½¿ç”¨ **7 å¤©** TTL
- **çŸ¿å·¥å¯èƒ½æŸå¤± 6/7 = 85.7% çš„åº”å¾—æ”¶ç›Š**

**æ­£ç¡®é…ç½®**:
```toml
pplns_ttl_days = 7  # æ ‡å‡†7å¤©PPLNSçª—å£
```

**å½±å“**: çŸ¿å·¥æ”¶ç›Šå¤§å¹…å‡å°‘ï¼Œpool ä¸å¯ç”¨

---

### 3. âŒ ignore_difficulty = true è·³è¿‡ä»½é¢éªŒè¯

**å½“å‰é…ç½®**:
```toml
ignore_difficulty = true  # âš ï¸ è·³è¿‡éš¾åº¦éªŒè¯
```

**é—®é¢˜è¯´æ˜**:
- `ignore_difficulty = true` è·³è¿‡ä»½é¢éš¾åº¦éªŒè¯
- å¯èƒ½æ¥å—æ— æ•ˆ/ä½è´¨é‡ä»½é¢
- å¯¼è‡´ PPLNS è®¡ç®—ä¸å‡†ç¡®
- å¯èƒ½è¢«æ¶æ„çŸ¿å·¥åˆ©ç”¨

**æ­£ç¡®é…ç½®**:
```toml
ignore_difficulty = false  # å¿…é¡»éªŒè¯ä»½é¢éš¾åº¦
```

**å½±å“**: æ”¶ç›Šåˆ†é…ä¸å…¬ï¼Œå¯èƒ½è¢«æ”»å‡»

---

## âš ï¸ é«˜é£é™©é—®é¢˜ (P1)

### 4. start_difficulty = 1, minimum_difficulty = 1

**é—®é¢˜**:
- éš¾åº¦ 1 å¯èƒ½äº§ç”Ÿå¤§é‡ä½è´¨é‡ä»½é¢
- å½±å“ PPLNS çª—å£è®¡ç®—å‡†ç¡®æ€§
- å¢åŠ æ•°æ®åº“è´Ÿæ‹…

**å»ºè®®é…ç½®**:
```toml
start_difficulty = 32       # åˆå§‹éš¾åº¦
minimum_difficulty = 16     # æœ€ä½éš¾åº¦
```

---

### 5. difficulty_multiplier = 1.0

**è¯´æ˜**:
- PPLNS çª—å£å¤§å°å€æ•°
- 1.0 = æ ‡å‡† PPLNS çª—å£
- å€¼è¶Šå¤§ï¼Œçª—å£è¶Šå¤§ï¼Œæ”¶ç›Šè¶Šå¹³æ»‘ä½†å»¶è¿Ÿè¶Šé«˜

**å»ºè®®**: ä¿æŒ 1.0ï¼Œæˆ–æ ¹æ®çŸ¿æ± è§„æ¨¡è°ƒæ•´

---

## PPLNS ç®—æ³•åŸç†

### ä»€ä¹ˆæ˜¯ PPLNS?

PPLNS (Pay Per Last N Shares) æ˜¯ä¸€ç§æ ¹æ®çŸ¿å·¥æœ€è¿‘è´¡çŒ®çš„ä»½é¢æ¯”ä¾‹åˆ†é…åŒºå—å¥–åŠ±çš„ç®—æ³•ã€‚

### æ ¸å¿ƒå…¬å¼

```
çŸ¿å·¥æ”¶ç›Š = åŒºå—å¥–åŠ± Ã— (çŸ¿å·¥æœ‰æ•ˆä»½é¢ / PPLNSçª—å£å†…æ€»ä»½é¢)

PPLNSçª—å£å¤§å° = ç½‘ç»œéš¾åº¦ Ã— difficulty_multiplier Ã— æ—¶é—´çª—å£
```

### å…³é”®å‚æ•°å½±å“

| å‚æ•° | å½±å“ | æ¨èå€¼ |
|-----|------|--------|
| pplns_ttl_days | ä»½é¢æœ‰æ•ˆæœŸ | 7 å¤© |
| difficulty_multiplier | PPLNSçª—å£å¤§å° | 1.0 |
| start_difficulty | åˆå§‹æŒ–çŸ¿éš¾åº¦ | 32 |
| minimum_difficulty | æœ€ä½æŒ–çŸ¿éš¾åº¦ | 16 |

---

## æ”¶ç›Šåˆ†é…æµç¨‹

### 1. ä»½é¢æäº¤
```
çŸ¿å·¥ -> æäº¤ä»½é¢ -> StratumæœåŠ¡å™¨
  -> éªŒè¯éš¾åº¦ -> è®°å½•åˆ°æ•°æ®åº“
  -> æ›´æ–°çŸ¿å·¥ç»Ÿè®¡
```

### 2. åŒºå—å‘ç°
```
Bitcoinç½‘ç»œ -> ZMQé€šçŸ¥ -> Pool
  -> è·å–Coinbaseä¿¡æ¯ -> è®¡ç®—PPLNSçª—å£
  -> ç¡®å®šå—ç›ŠçŸ¿å·¥ -> æ„å»ºCoinbaseäº¤æ˜“
```

### 3. æ”¶ç›Šåˆ†é…
```
Coinbaseäº¤æ˜“è¾“å‡º:
1. çŸ¿å·¥A: ä»½é¢A/æ€»ä»½é¢ Ã— å¥–åŠ± Ã— (1 - fee - donation)
2. çŸ¿å·¥B: ä»½é¢B/æ€»ä»½é¢ Ã— å¥–åŠ± Ã— (1 - fee - donation)
...
N. æèµ åœ°å€: å¥–åŠ± Ã— donation
N+1. æ‰‹ç»­è´¹åœ°å€: å¥–åŠ± Ã— fee
```

---

## ä»½é¢éªŒè¯æœºåˆ¶

### å¿…é¡»éªŒè¯çš„é¡¹ç›®

| éªŒè¯é¡¹ | è¯´æ˜ | å¿½ç•¥åæœ |
|-------|------|---------|
| éš¾åº¦éªŒè¯ | ä»½é¢æ»¡è¶³å½“å‰éš¾åº¦ | æ— æ•ˆä»½é¢è¢«æ¥å— |
| é‡å¤éªŒè¯ | é˜²æ­¢é‡å¤æäº¤ | åŒèŠ±æ”»å‡» |
| æ—¶é—´æˆ³éªŒè¯ | é˜²æ­¢è¿‡æœŸ/æœªæ¥ä»½é¢ | æ—¶é—´æ”»å‡» |
| NonceéªŒè¯ | é˜²æ­¢ä¼ªé€ ä»½é¢ | ä¼ªé€ æ”»å‡» |

---

## ç”Ÿäº§ç¯å¢ƒæ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰éªŒè¯

- [ ] **donation è®¾ç½®æ­£ç¡®** (0 æˆ–å°é¢ï¼Œå¦‚ 50)
- [ ] **pplns_ttl_days = 7**
- [ ] **ignore_difficulty = false**
- [ ] start_difficulty >= 16
- [ ] minimum_difficulty >= 8
- [ ] difficulty_multiplier = 1.0
- [ ] fee å’Œ fee_address å·²é…ç½®æˆ–æ³¨é‡Š
- [ ] bootstrap_address è®¾ç½®ä¸ºæœ‰æ•ˆçš„çŸ¿å·¥åœ°å€

### æµ‹è¯•éªŒè¯

- [ ] åœ¨æµ‹è¯•ç½‘ (signet/testnet4) éªŒè¯æ”¶ç›Šåˆ†é…
- [ ] éªŒè¯ PPLNS çª—å£è®¡ç®—æ­£ç¡®
- [ ] éªŒè¯ Coinbase äº¤æ˜“è¾“å‡ºæ­£ç¡®
- [ ] éªŒè¯ä»½é¢ç»Ÿè®¡å‡†ç¡®
- [ ] éªŒè¯ç®—åŠ›æ˜¾ç¤ºæ­£ç¡®

### ç›‘æ§æŒ‡æ ‡

- [ ] æ€»ä»½é¢æ•°
- [ ] PPLNS çª—å£å¤§å°
- [ ] æœ‰æ•ˆä»½é¢ç‡
- [ ] çŸ¿å·¥ç®—åŠ›åˆ†å¸ƒ
- [ ] é¢„æœŸæ”¶ç›Š vs å®é™…æ”¶ç›Š

---

## ç«‹å³ä¿®å¤é…ç½®

```toml
# ========== æ­£ç¡®çš„ç”Ÿäº§é…ç½® ==========

[store]
path = "./store.db"
background_task_frequency_hours = 24
pplns_ttl_days = 7  # âœ… æ ‡å‡†7å¤©PPLNS

[stratum]
hostname = "0.0.0.0"
port = 3333
start_difficulty = 32       # âœ… åˆç†çš„åˆå§‹éš¾åº¦
minimum_difficulty = 16     # âœ… åˆç†çš„æœ€ä½éš¾åº¦
bootstrap_address = "bc1q...YOUR_MINER_ADDRESS"  # âœ… çŸ¿å·¥æ”¶æ¬¾åœ°å€

# å¼€å‘è€…æèµ  (å¯é€‰ï¼Œæ¨è 0-1%)
# donation_address = "bc1q...dev_address"
# donation = 50  # 0.5%

# çŸ¿æ± æ‰‹ç»­è´¹ (å¯é€‰)
# fee_address = "bc1q...pool_address"
# fee = 200  # 2%

ignore_difficulty = false  # âœ… å¿…é¡»éªŒè¯éš¾åº¦
network = "main"
version_mask = "1fffe000"
difficulty_multiplier = 1.0
pool_signature = "dmpool"

[bitcoinrpc]
url = "http://127.0.0.1:38332"  # signetç«¯å£
username = "p2pool"
password = "p2pool"

[logging]
level = "info"
stats_dir = "./logs/stats"

[api]
hostname = "0.0.0.0"
port = 46884
auth_user = "dmpool"
auth_token = "generated_token"
```

---

## æ€»ç»“

### å½“å‰çŠ¶æ€: âŒ **ä¸å¯ç”¨äºç”Ÿäº§**

åŸå› :
1. **donation = 10000** å¯¼è‡´çŸ¿å·¥æ”¶ç›Šä¸ºé›¶
2. **pplns_ttl_days = 1** å¯¼è‡´çŸ¿å·¥æ”¶ç›Šå¤§å¹…å‡å°‘
3. **ignore_difficulty = true** å¯èƒ½å¯¼è‡´æ”¶ç›Šåˆ†é…ä¸å…¬

### ä¿®å¤åçŠ¶æ€: âœ… **å¯ç”¨äºç”Ÿäº§**

ä¿®å¤ä»¥ä¸Š3ä¸ªé—®é¢˜åï¼Œé…ç½®æ­£ç¡®ï¼Œå¯ä»¥éƒ¨ç½²ã€‚

### ä¼˜å…ˆçº§

| ä¼˜å…ˆçº§ | é—®é¢˜ | ä¿®å¤æ—¶é—´ |
|-------|------|---------|
| P0 | donation = 10000 | ç«‹å³ |
| P0 | pplns_ttl_days = 1 | ç«‹å³ |
| P0 | ignore_difficulty = true | ç«‹å³ |
| P1 | éš¾åº¦è®¾ç½®è¿‡ä½ | 1å¤©å†… |
| P2 | å…¶ä»–ä¼˜åŒ– | 1å‘¨å†… |

---

**å®¡è®¡ç»“è®º**: åœ¨ä¿®å¤ä¸Šè¿° P0 é—®é¢˜ä¹‹å‰ï¼Œ**ä¸¥ç¦éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ**ã€‚
